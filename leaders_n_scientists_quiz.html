<!DOCTYPE html>
<html lang="en">

<head>
   <title> JavaScript Quiz (Dances of India) </title>
</head>


<script>
   //****************************************************
//  This block helps to catch the syntax errors.
//  These errors are reported back to the web page
//****************************************************
      window.onerror = function(e) {
        document.write('There\'s an error: ', e, '</br>')
     };
   </script>

   <!--**************************************************** -->
   <!--This is the tool bar-->
   <!--**************************************************** -->
<style>
   #table_1 {
      border-spacing: 200px 0px;
         }

</style>
   <table id = "table_1">
      <tr>
          <td><image id = "silc" src="Images/index_images/silc_home.jpg"></image></td>
          <!--Link To Preferences-->
          <td id = "text"><a href = "">Preferences</a></td>
          <!--Link To About-->
          <td id = "text"><a href = "">About</a></td>
          <!--Link To Help-->
          <td id = "text"><a href = "">Help</a></td>
      </tr>
   </table>
<body>

   <!--**************************************************** -->
   <!-- This is a placeholder question.  -->
   <!-- This will be replaced by a random question -->
   <!-- when the page first loads up.  -->
   <!-- **************************************************** -->

   <p><img id="q_image" src="images\dances\kathakali.jpeg" style="max-height:250px;width:auto;" alt="img not found" /></p>
   <p id="question"> Dummy question </p>
   <form>
      <input type="radio" name="choices" id="choice_1" value="A" onclick="updateGivenAnswer(this.value)" />
      <label for="choice_1" id="choice_1_label"> choice 1 </label>
      <br>
      <input type="radio" name="choices" id="choice_2" value="B" onclick="updateGivenAnswer(this.value)" />
      <label for="choice_2" id="choice_2_label"> choice 2 </label>
      <br>
      <input type="radio" name="choices" id="choice_3" value="C" onclick="updateGivenAnswer(this.value)" />
      <label for="choice_3" id="choice_3_label"> choice 3 </label>
      <br>
      <input type="radio" name="choices" id="choice_4" value="D" onclick="updateGivenAnswer(this.value)" />
      <label for="choice_4" id="choice_4_label"> choice 4 </label>
      <br>
   </form>

</body>

<!-- **************************************************** -->
<!--   Add three buttons "Previous", "Submit", "Next" -->
<!--   TODO: These will be enabled / disabled based on how many questions are answered. -->
<!-- **************************************************** -->

<button id="previousBtn" type="button">
   Previous
</button>

<button id="submitBtn" type="button" disabled>
   Submit
</button>

<button id="nextBtn" type="button">
   Next
</button>

</body>

<script>
   //**********************************************
   // STEP 1:  Assign the Event Listeners to the three buttons
   //          Also attach the Event Listern to the radio buttons
   //**********************************************

   var next_btn = document.getElementById("nextBtn");
   if (next_btn) {
      next_btn.addEventListener("click", showNextQuestion);
   }

   var previous_btn = document.getElementById("previousBtn");
   if (previous_btn) {
      previous_btn.addEventListener("click", showPreviousQuestion);
   }

   var submit_btn = document.getElementById("submitBtn");
   if (submit_btn) {
      submit_btn.addEventListener("click", showResults);
   }

   //**********************************************
   // STEP 2:  Establish the contract for QUESTION object
   //**********************************************

   /* This is our contract for the Question Object
   topic
   question
   choice_1
   choice_2
   choice_3
   choice_4
   answer
   image
   given_answer
   */

   // Object constructor function and methods
   function Question(x_topic, x_question, x_a, x_b, x_c, x_d, x_answer, x_image, x_given_answer) {
      this.topic = x_topic;
      this.question = x_question;
      this.choice_1 = x_a;
      this.choice_2 = x_b;
      this.choice_3 = x_c;
      this.choice_4 = x_d;
      this.answer = x_answer;
      this.image = x_image;
      this.given_answer = x_given_answer;

      this.toString = function () {
         document.write("<br><br> ");
         document.write("<br>" + this.topic);
         document.write("<br>" + this.question);
         document.write("<br>" + this.choice_1);
         document.write("<br>" + this.choice_2);
         document.write("<br>" + this.choice_3);
         document.write("<br>" + this.choice_4);
         document.write("<br>" + this.answer);
         document.write("<br>" + this.image);
         document.write("<br>" + this.given_answer + "<br>");
      }
      
   }
   //**********************************************
   // STEP 3:  Create 20 Questions per the above contract
   // TODO: Only 10 are created as of now; 10 pending to be done
   // NOTE: for this topic, images are stored in images/dances folder
   //**********************************************
   var q1 = new Question("Scientists and Leaders",
      "Who is this person?",
      "Jawaharlal Nehru",
      "Sardar Patel",
      "Mahatma Gandhi",
      "Lal Bahadur Shastri",
      "A",
      "Nehru.jpg",
      "X");
   var q2 = new Question("Scientists and Leaders",
      "Who was the most recent Indian to win a Nobel Prize?",
      "Amartya Sen",
      "Mother Teresa",
      "Kailash Satyarti",
      "C.V. Raman",
      "C",
      "question.jpg",
      "X");
   var q3 = new Question("Scientists and Leaders",
      "Who was is father of the Indian Space Program?",
      "A.P.J. Abdul Kalam",
      "Vikram Sarabai",
      "Satish Dawan",
      "K.Sivan",
      "B",
      "question.jpg",
      "X");
   var q4 = new Question("Scientists and Leaders",
      "Which Indian is cretided for first using the number Zero in mathematics?",
      "BrahmaGupta",
      "Aryabhata",
      "K. Ramasubramaniam",
      " Ramanujam",
      "A",
      "question.jpg",
      "X");
   var q5 = new Question("Scientists and Leaders",
      "Who is considered one of the earliest surgeons from India?",
      "Charaka",
      "Vagbhata",
      "Jivaka",
      "Sushruta",
      "D",
      "question.jpg",
      "X");
   var q6 = new Question("Scientists and Leaders",
      "In which country did Mohandas Karamchand Gandhi get the honorific title 'Mahatma'?",
      "India",
      "England",
      "South Africa",
      "Pakistan",
      "C",
      "gandhi.jpg",
      "X");
   var q7 = new Question("Scientists and Leaders",
      "Who was the first President of India?",
      "Rajendra Prasad",
      "C. Rajagopalachari",
      "B.R. Ambedkar",
      "Sarvepalli Radhakrishnan",
      "A",
      "question.jpg",
      "X");
   var q8 = new Question("Scientists and Leaders",
      "Who was the first female prime minister of India?",
      "Pratibha Patil",
      "Indira Gandhi",
      "Vijaya Lakshmi Pandit",
      "Sarojini Naidu",
      "B",
      "question.jpg",
      "X");
   var q9 = new Question("Scientists and Leaders",
      "The White Revolution made India the largest producer of milk in the world. Who was the father of the White Revolution?",
      "Verghese Kurien",
      "H.M. Dalaya",
      "M.S. Swaminathan",
      "Narayana Murthy",
      "A",
      "question.jpg",
      "X");
   var q10 = new Question("Scientists and Leaders",
      "Who is the Father of the Green Revolution in India?",
      "M.S. Swaminathan",
      "Gurudev Singh Khush",
      "William Gaud",
      "Norman Barlaug",
      "A",
      "question.jpg",
      "X");
   var q11 = new Question("Scientists and Leaders",
      "Who is the Prime Minister of India?",
      "Rahul Gandhi",
      "Narendra Modi",
      "Mayawathi",
      "Sharad Pawar",
      "B",
      "question.jpg",
      "X");
   var q12 = new Question("Scientists and Leaders",
      "Who was the first woman physician in India?",
      "Kadambini Ganguly",
      "Pandita Ramabai",
      "Savitribai Phule",
      "Anandibai Joshi",
      "D",
      "question.jpg",
      "X");
   var q13 = new Question("Scientists and Leaders",
      "Who is this freedom fighter?",
      "Kasthurba Gandhi",
      "Kamala Nehru",
      "Rani Lakshmi Bai",
      "Sarojini Naidu",
      "C",
      "JhansiKiRani.jpg",
      "X");
   var q14 = new Question("Scientists and Leaders",
      "What is the Chandrashekar Number for which Dr. Subramanian Chandrashekar was awarded the Nobel Prize in 1983?",
      "Can be used to construct radio receivers",
      "Determines the fate of a dying star",
      "Used in calculations performed by computers",
      "Used to measure magnetic properties of elements",
      "B",
      "question.jpg",
      "X");
   var q15 = new Question("Scientists and Leaders",
      "Which is these statements is true?",
      "Diamond mining was practiced in India for at least 5000 years",
      "India was the only country with diamond deposits till the 18th century",
      "Golconda was an important diamond trading center in India",
      "All the statements are true",
      "D",
      "diamonds.jpg",
      "X");
   var q16 = new Question("Scientists and Leaders",
      "Dr. Jagadish Chandra Bose invented what form of communication?",
      "Radio transmission",
      "Television",
      "Microwave transmission",
      "Telephone",
      "C",
      "Bose.jpg",
      "X");
   var q17 = new Question("Scientists and Leaders",
      "What weapon was first developed by Tipu Sultan?",
      "Armor piercing bullets",
      "Iron rockets",
      "Grenades",
      "Metal spears",
      "B",
      "TipuSultan.jpg",
      "X");
   var q18 = new Question("Scientists and Leaders",
      "Which of the following were invented in India?",
      "Chess",
      "Shampoo",
      "Plough",
      "All of the above",
      "D",
      "question.jpg",
      "X");
   var q19 = new Question("Scientists and Leaders",
      "Who invented Oil-Eating-Bacteria in 1971?",
      "Ananda Mohan Chakrabarty",
      "M.V.R.K. Murty",
      "Shanti Swarup Bhatnagar",
      "Satyendra Nath Bose",
      "A",
      "question.jpg",
      "X");
   var q20 = new Question("Scientists and Leaders",
      "15.	Which Noble Gas was discovered in India?",
      "Radon",
      "Helium",
      "Xenon",
      "Argon",
      "B",
      "question.jpg",
      "X");
    //**********************************************
   // STEP 4:  Create an array to hold all the above questions
   //**********************************************

   var question_bank = [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10, q11, q12, q13, q14, q15, q16, q17, q18, q19, q20];

   //**********************************************
   // STEP 5:  set HOW_MANY=5 questions
   // This constant will be used to select that many questions from the question bank 
   //**********************************************
   var HOW_MANY = 20;

   //**********************************************
   // STEP 6:  Shuffle/Randomize the Array
   // Reference: https://javascript.info/task/shuffle 
   //**********************************************
   function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
         let j = Math.floor(Math.random() * (i + 1));
         [array[i], array[j]] = [array[j], array[i]];
      }
   }
   // for debugging purposes, disable shuffle for the timebeing
   // shuffle(question_bank);

   //**********************************************
   // STEP 7:  Select HOW_MANY questions 
   //**********************************************
   var mini_question_bank = question_bank.slice(0, HOW_MANY);



   //**********************************************
   // STEP 8:  Display the first question 
   //          from the mini_question_bank 
   // A random question will then show up when the page first loads up.
   //**********************************************
   // we need to keep track of where we are in the question order
   var index = 0;
   updateQuestion(index);


   //**********************************************
   // STEP 9:  Implement the Next Button
   //**********************************************

   function showNextQuestion() {
      index = index + 1;
      updateQuestion(index);
   }


   //**********************************************
   // STEP 10:  Implement the Previous Button
   //**********************************************

   function showPreviousQuestion() {
      index = index - 1;
      updateQuestion(index);
   }


   //**********************************************
   // STEP 11:  Implement the Submit Button
   //**********************************************

   // Loop through the mini_question_object
   // compare the given_answers with the correct answer
   // keep counting the correct answers
   // publish the score to the user
   function showResults() {
           
      var count = 0;
      for (var i = 0; i < mini_question_bank.length; i++)
      {
         if (mini_question_bank[i].answer == mini_question_bank[i].given_answer)
         {
            count = count+ 1;
         }
      }

      document.write("<br>Congratulations");
      document.write("<br>Your final score: ", count, " out of ", HOW_MANY);
      document.write("<br><br><br>");
      document.write(mini_question_bank);
   }

   //**********************************************
   // STEP 12:  This is the common function called by 
   //           Page Load, Previous and Next buttons
   //**********************************************

   function updateQuestion(selected_question) {
      // Get the Question at the bookmark/index
      var selected_question = mini_question_bank[index];

      // now update the default question with the selected question
      document.getElementById("question").innerHTML = selected_question.question;
      document.getElementById("choice_1_label").innerHTML = selected_question.choice_1;
      document.getElementById("choice_2_label").innerHTML = selected_question.choice_2;
      document.getElementById("choice_3_label").innerHTML = selected_question.choice_3;
      document.getElementById("choice_4_label").innerHTML = selected_question.choice_4;
      document.getElementById("q_image").src = "images\\scientists\\" + selected_question.image;


      // Do not carry forward the previous selection on the radio buttons
      // If the user has not selected any answer yet, then unset all the radio buttons
      // If the user changes the answer, then the corresponding radio button event will update the answer
      if (selected_question.given_answer == "X") {
         // if the given_answer is X, unselect all
         document.getElementById("choice_1").checked = false;
         document.getElementById("choice_2").checked = false;
         document.getElementById("choice_3").checked = false;
         document.getElementById("choice_4").checked = false;
      } 

      // If the question already has an answer, then show that answer
      if (selected_question.given_answer == "A") {
         document.getElementById("choice_1").checked = true;
      } else
      if (selected_question.given_answer == "B") {
         document.getElementById("choice_2").checked = true;
      } else
      if (selected_question.given_answer == "C") {
         document.getElementById("choice_3").checked = true;
      } else
      if (selected_question.given_answer == "D") {
         document.getElementById("choice_4").checked = true;
      }
      // once the question is updated, validate all the three buttons
      validateButtons();
   }


   
   //**********************************************
   // LAST STEP:  All the supporting functions are here
   //********************************************** 

   // When the user presses the radio button
   // We need to update the Question object with the given_answer
   // this function will be invoked whenever the user selects a choice
   // we also need to validate the buttons here
   // since the SUBMIT button may have to be enabled
   function updateGivenAnswer(value) {
      mini_question_bank[index].given_answer = value;
      validateButtons();
   }

   // Validation of all the three buttons - Previous, Submit and Next - happen here
   // Validation depends on the index and whether all questions are answered by the user
   function validateButtons() {
      // if index == 0, disable the previous button
      if (index == 0) {
         previous_btn.disabled = true;
      } else {
         previous_btn.disabled = false;
      }

      // if index == HOW_MANY, disable the next button
      if (index == HOW_MANY-1) {
         next_btn.disabled = true;
      } else {
         next_btn.disabled = false;
      }

      // if all questions are answered, then enable the submit button
      var are_all_questions_answered = true;
      for (var i=0; i < mini_question_bank.length; i=i+1)
      {
         if (mini_question_bank[i].given_answer == "X")
         {
            are_all_questions_answered = false;
            break;
         }
      }

      if (are_all_questions_answered)
      {
         submit_btn.disabled = false;
      }
   }
</script>